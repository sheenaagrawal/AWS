import com.amazonaws.auth.*;
import com.amazonaws.auth.profile.ProfileCredentialsProvider;
import com.amazonaws.internal.StaticCredentialsProvider;
import com.amazonaws.services.translate.AmazonTranslate;
import com.amazonaws.services.translate.AmazonTranslateClient;
import com.amazonaws.services.translate.model.TranslateTextRequest;
import com.amazonaws.services.translate.model.TranslateTextResult;
import java.util.ArrayList;
import java.util.List;

public class MultiSentenceTranslator {

    public static void main(String[] args) {
        String region = "us-west-2";
        String text = "Hola como estas. Mi nombre es Sheena. Yo vivo en India. Estoy traduciendo idiomas";

        String sourceLang = "spanish";
        String targetLang = "english";

        SentenceSegmenter sentenceSegmenter = new SentenceSegmenter();
        List<String> sentences = new ArrayList<>();
        try {
            sentences = sentenceSegmenter.segment(text, sourceLang);
        } catch (Exception e) {
            System.out.println(e);
            System.exit(1);
        }

        AWSCredentialsProvider awsCredentialsProvider = new AWSCredentialsProvider() {
            @Override
            public AWSCredentials getCredentials() {
                return new AWSCredentials() {
                    @Override
                    public String getAWSAccessKeyId() {
                        return "<access_key_id>";
                    }

                    @Override
                    public String getAWSSecretKey() {
                        return "<secret_key>";
                    }
                };
            }

            @Override
            public void refresh() {

            }
        };
        AmazonTranslate translate = AmazonTranslateClient.builder()
                .withRegion(region)
                .withCredentials(awsCredentialsProvider)
                .build();
        for (String sentence : sentences) {
            TranslateTextRequest request = new TranslateTextRequest()
                    .withText(sentence)
                    .withSourceLanguageCode(sourceLang)
                    .withTargetLanguageCode(targetLang);
            System.out.println("before translation");
            var result = translate.translateText(request).getTranslatedText();
            System.out.println("after translation");
            System.out.println("Original text: " + sentence);
            System.out.println("Translated text: " + result);
        }
    }

}
